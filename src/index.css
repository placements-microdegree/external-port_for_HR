:root {
  --P100: #4f46e5;

  --app-font-sans: Satoshi, "Satoshi Fallback" !important;
  --app-font-display: Satoshi, "Satoshi Fallback" !important;

  /* Bootstrap font variables (prevent computed font-family showing system-ui) */
  --bs-font-sans-serif: Satoshi, "Satoshi Fallback" !important;
  --bs-body-font-family: Satoshi, "Satoshi Fallback" !important;
  --bs-font-monospace: Satoshi, "Satoshi Fallback" !important;

  /* Dark theme primitives: Premium Slate/Indigo */
  --bg: #020617;
  --surface-1: #0f172a;
  --surface-2: #1e293b;
  --surface-3: rgba(255, 255, 255, 0.05); /* slightly subtle */
  --text: #f8fafc;
  --text-muted: #94a3b8;
  --border: rgba(148, 163, 184, 0.15);
  --border-strong: rgba(148, 163, 184, 0.25);
  --focus-ring: rgba(79, 70, 229, 0.4);
}

html[data-theme="light"] {
  /* Map app theme primitives onto Bootstrap's light variables where possible */
  --bg: var(--bs-body-bg, #ffffff);
  --surface-1: var(--bs-body-bg, #ffffff);
  --surface-2: var(--bs-tertiary-bg, var(--bs-secondary-bg, #f8f9fa));
  --surface-3: var(--bs-tertiary-bg, rgba(0, 0, 0, 0.04));
  --text: var(--bs-body-color, #111827);
  --text-muted: var(--bs-secondary-color, #6b7280);
  --border: var(--bs-border-color-translucent, rgba(0, 0, 0, 0.12));
  --border-strong: var(--bs-border-color, rgba(0, 0, 0, 0.2));
}

html {
  font-family: var(--app-font-sans) !important;
}

body {
  margin: 0;
  font-family: var(--app-font-sans) !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  font-weight: 400;
}

/* Tailwind/utility font classes: force Satoshi everywhere */
.font-sans,
.font-serif,
.font-mono {
  font-family: var(--app-font-sans) !important;
}

button,
input,
select,
textarea {
  font-family: inherit;
}

/* Skill badges (used in candidate profile popover) */
.skill-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border);
  color: var(--text);
  font-size: 0.78rem;
  font-weight: 600;
  line-height: 1.2;
  white-space: nowrap;
}

/* Bootstrap utility overrides for dark mode */
html[data-theme="dark"] .bg-white {
  background-color: var(--surface-1) !important;
}

/* Filters panel uses .bg-white; give it the glassy dark background */

body[data-theme="dark"] .filters-panel,
body[data-theme="dark"] .filters-panel.bg-white {
  background: rgba(255, 255, 255, 0.08) !important;
}

/* Filters: make button labels readable in dark mode */
html[data-theme="dark"] .filters-panel .btn,
body[data-theme="dark"] .filters-panel .btn {
  color: #fff !important;
}

html[data-theme="dark"] .text-dark {
  color: var(--text) !important;
}

html[data-theme="dark"] .text-muted {
  color: var(--text-muted) !important;
}

html[data-theme="dark"] .border,
html[data-theme="dark"] .border-top,
html[data-theme="dark"] .border-bottom,
html[data-theme="dark"] .border-start,
html[data-theme="dark"] .border-end {
  border-color: var(--border) !important;
}

html[data-theme="dark"] .shadow,
html[data-theme="dark"] .shadow-sm,
html[data-theme="dark"] .shadow-lg {
  box-shadow: 0 18px 45px rgba(0, 0, 0, 0.35) !important;
}

/* Forms */
html[data-theme="dark"] .form-control,
html[data-theme="dark"] .form-select,
html[data-theme="dark"] .input-group-text {
  background-color: var(--surface-3) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

html[data-theme="dark"] .form-control::placeholder {
  color: var(--text-muted) !important;
  opacity: 1;
}

html[data-theme="dark"] .form-control:focus,
html[data-theme="dark"] .form-select:focus {
  border-color: rgba(39, 93, 245, 0.65) !important;
  box-shadow: 0 0 0 0.2rem var(--focus-ring) !important;
}

/* Modals */
html[data-theme="dark"] .modal-content {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

html[data-theme="dark"] .modal-header,
html[data-theme="dark"] .modal-footer {
  border-color: var(--border) !important;
}

html[data-theme="dark"] .dropdown-menu {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

html[data-theme="dark"] .dropdown-item {
  color: var(--text) !important;
}

html[data-theme="dark"] .dropdown-item:hover,
html[data-theme="dark"] .dropdown-item:focus {
  background-color: rgba(255, 255, 255, 0.08) !important;
}

/* React-Toastify: fix white toast + invisible close button in dark mode */
html[data-theme="dark"] .Toastify__toast {
  background: var(--surface-1) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
}

html[data-theme="dark"] .Toastify__toast-body {
  color: var(--text) !important;
}

html[data-theme="dark"] .Toastify__close-button {
  opacity: 1;
  color: #fff !important;
}

html[data-theme="dark"] .Toastify__close-button > svg {
  fill: currentColor !important;
}

html[data-theme="dark"] .Toastify__progress-bar {
  background: rgba(255, 255, 255, 0.35) !important;
}

code {
  font-family: var(--app-font-sans);
}

.modal-backdrop {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  animation: fadeIn 0.3s ease;
}

.modal-content-custom {
  animation: popUp 0.35s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    -webkit-backdrop-filter: blur(0px);
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
}

@keyframes popUp {
  from {
    transform: scale(0.9);
  }
  to {
    transform: scale(1);
  }
}

/* Fix: Suppress distracting injected viewport glow */
#preact-border-shadow-host {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}
